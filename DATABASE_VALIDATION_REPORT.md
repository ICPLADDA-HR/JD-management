# Database Validation Report - Create Job Description

## ‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö
‚úÖ **Create Job Description ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô‡∏ï‡∏≤‡∏° Database Schema**

---

## 1. ‡∏ï‡∏≤‡∏£‡∏≤‡∏á `job_descriptions` (‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏´‡∏•‡∏±‡∏Å)

### Columns ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡πÉ‡∏ô Database:
| Column | Type | Required | Default | Status |
|--------|------|----------|---------|--------|
| `id` | UUID | ‚úÖ | uuid_generate_v4() | ‚úÖ Auto-generated |
| `position` | TEXT | ‚úÖ | - | ‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å |
| `job_band` | TEXT | ‚úÖ | - | ‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å |
| `job_grade` | TEXT | ‚úÖ | - | ‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å |
| `location_id` | UUID | ‚úÖ | - | ‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å |
| `department_id` | UUID | ‚úÖ | - | ‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å |
| `team_id` | UUID | ‚úÖ | - | ‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å |
| `direct_supervisor` | TEXT | ‚úÖ | - | ‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å |
| `job_purpose` | TEXT | ‚úÖ | - | ‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å |
| `status` | TEXT | ‚úÖ | 'draft' | ‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å |
| `created_by` | UUID | ‚ùå | - | ‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å |
| `updated_by` | UUID | ‚ùå | - | ‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å (‡πÉ‡∏ä‡πâ‡∏Ñ‡πà‡∏≤‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö created_by) |
| `version` | INTEGER | ‚úÖ | 1 | ‚úÖ Auto-default |
| `parent_version_id` | UUID | ‚ùå | NULL | ‚úÖ Auto-default (NULL) |
| `created_at` | TIMESTAMP | ‚úÖ | NOW() | ‚úÖ Auto-generated |
| `updated_at` | TIMESTAMP | ‚úÖ | NOW() | ‚úÖ Auto-generated |

**‚úÖ ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏´‡∏•‡∏±‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô 100%**

---

## 2. ‡∏ï‡∏≤‡∏£‡∏≤‡∏á `jd_responsibilities` (‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö)

### Columns ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡πÉ‡∏ô Database:
| Column | Type | Required | Status |
|--------|------|----------|--------|
| `id` | UUID | ‚úÖ | ‚úÖ Auto-generated |
| `jd_id` | UUID | ‚úÖ | ‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å |
| `category` | TEXT | ‚úÖ | ‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å |
| `description` | TEXT | ‚úÖ | ‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å |
| `order_index` | INTEGER | ‚úÖ | ‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å (‡πÉ‡∏ä‡πâ index ‡∏à‡∏≤‡∏Å array) |
| `created_at` | TIMESTAMP | ‚úÖ | ‚úÖ Auto-generated |

### Categories ‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö:
- ‚úÖ `strategic` (‡πÄ‡∏ä‡∏¥‡∏á‡∏Å‡∏•‡∏¢‡∏∏‡∏ó‡∏ò‡πå)
- ‚úÖ `team_management` (‡∏Å‡∏≤‡∏£‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏ó‡∏µ‡∏° ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏ö‡∏∏‡∏Ñ‡∏•‡∏≤‡∏Å‡∏£)
- ‚úÖ `general` (‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ)
- ‚úÖ `culture` (‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡∏™‡πà‡∏á‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏ß‡∏±‡∏í‡∏ô‡∏ò‡∏£‡∏£‡∏°‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏£)
- ‚úÖ `efficiency` (‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡πà‡∏≤‡πÉ‡∏´‡∏°‡πà‡πÜ)
- ‚úÖ `other` (‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö‡∏î‡πâ‡∏≤‡∏ô‡∏≠‡∏∑‡πà‡∏ô‡πÜ)
- ‚ö†Ô∏è `key` (‡∏°‡∏µ‡πÉ‡∏ô schema ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô UI)

**‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô - ‡∏Å‡∏£‡∏≠‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞ items ‡∏ó‡∏µ‡πà‡∏°‡∏µ description**

---

## 3. ‡∏ï‡∏≤‡∏£‡∏≤‡∏á `jd_risks` (‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á)

### Columns ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡πÉ‡∏ô Database:
| Column | Type | Required | Status |
|--------|------|----------|--------|
| `id` | UUID | ‚úÖ | ‚úÖ Auto-generated |
| `jd_id` | UUID | ‚úÖ | ‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å |
| `type` | TEXT | ‚úÖ | ‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å |
| `description` | TEXT | ‚úÖ | ‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å |
| `risk_level` | TEXT | ‚úÖ | ‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å (default: 'medium') |
| `order_index` | INTEGER | ‚úÖ | ‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å (‡πÉ‡∏ä‡πâ index ‡∏à‡∏≤‡∏Å array) |
| `created_at` | TIMESTAMP | ‚úÖ | ‚úÖ Auto-generated |

### Risk Types ‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö:
- ‚úÖ `external` (‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å)
- ‚úÖ `internal` (‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏†‡∏≤‡∏¢‡πÉ‡∏ô)

### Risk Levels:
- ‚ö†Ô∏è ‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πâ‡∏Ñ‡πà‡∏≤ default ‡πÄ‡∏õ‡πá‡∏ô `'medium'` ‡πÄ‡∏™‡∏°‡∏≠
- Database ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö: `'low'`, `'medium'`, `'high'`

**‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô - ‡∏Å‡∏£‡∏≠‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞ items ‡∏ó‡∏µ‡πà‡∏°‡∏µ description**

---

## 4. ‡∏ï‡∏≤‡∏£‡∏≤‡∏á `jd_competencies` (‡∏™‡∏°‡∏£‡∏£‡∏ñ‡∏ô‡∏∞)

### Columns ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡πÉ‡∏ô Database:
| Column | Type | Required | Constraint | Status |
|--------|------|----------|------------|--------|
| `id` | UUID | ‚úÖ | - | ‚úÖ Auto-generated |
| `jd_id` | UUID | ‚úÖ | - | ‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å |
| `competency_id` | UUID | ‚úÖ | - | ‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å |
| `score` | INTEGER | ‚úÖ | 1-5 | ‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å |
| `notes` | TEXT | ‚ùå | - | ‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å (optional) |
| `created_at` | TIMESTAMP | ‚úÖ | - | ‚úÖ Auto-generated |

### Competencies ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö:
1. ‚úÖ Execution
2. ‚úÖ Communication
3. ‚úÖ Self Awareness
4. ‚úÖ Leadership
5. ‚úÖ Business Mind
6. ‚úÖ Long-term Thinking

**‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô - ‡∏Å‡∏£‡∏≠‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞ competencies ‡∏ó‡∏µ‡πà‡∏°‡∏µ score > 0**

---

## ‡∏™‡∏£‡∏∏‡∏õ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á API

### API Method: `jobDescriptionsAPI.create()`

```typescript
// 1. ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏•‡∏±‡∏Å (job_descriptions)
const insertData = {
  position,
  job_band,
  job_grade,
  location_id,
  department_id,
  team_id,
  direct_supervisor,
  job_purpose,
  status,
  created_by,
  updated_by,
};

// 2. ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å Responsibilities (jd_responsibilities)
responsibilities.map((resp, index) => ({
  jd_id,
  category,
  description,
  order_index: index,
}));

// 3. ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å Risks (jd_risks)
risks.map((risk, index) => ({
  jd_id,
  type,
  description,
  risk_level: 'medium',
  order_index: index,
}));

// 4. ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å Competencies (jd_competencies)
competencies
  .filter(comp => comp.score > 0)
  .map(comp => ({
    jd_id,
    competency_id,
    score,
    notes,
  }));
```

---

## ‡∏Ç‡πâ‡∏≠‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï‡πÅ‡∏•‡∏∞‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞

### ‚úÖ ‡∏à‡∏∏‡∏î‡πÅ‡∏Ç‡πá‡∏á:
1. ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô‡∏ó‡∏∏‡∏Å column ‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô
2. ‡∏°‡∏µ‡∏Å‡∏≤‡∏£ validate ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡πà‡∏≠‡∏ô‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å
3. ‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ß‡πà‡∏≤‡∏á‡∏≠‡∏≠‡∏Å (empty descriptions, score = 0)
4. ‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ error ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°
5. ‡πÉ‡∏ä‡πâ transaction-like approach (‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏´‡∏•‡∏±‡∏Å‡∏Å‡πà‡∏≠‡∏ô ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏≠‡∏¢‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏¢‡πà‡∏≠‡∏¢)

### ‚ö†Ô∏è ‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏Ñ‡∏ß‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á:

1. **Risk Level**: ‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πâ‡∏Ñ‡πà‡∏≤ default ‡πÄ‡∏õ‡πá‡∏ô `'medium'` ‡πÄ‡∏™‡∏°‡∏≠
   - **‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥**: ‡πÄ‡∏û‡∏¥‡πà‡∏° UI ‡πÉ‡∏´‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å risk level (low/medium/high) ‡πÑ‡∏î‡πâ

2. **Category 'key'**: ‡∏°‡∏µ‡πÉ‡∏ô database schema ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô UI
   - **‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥**: ‡∏•‡∏ö‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å schema ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏ô UI

3. **Direct Supervisor**: ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ validate ‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏Å
   - **‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥**: ‡πÄ‡∏û‡∏¥‡πà‡∏° validation ‡∏´‡∏£‡∏∑‡∏≠‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô optional ‡πÉ‡∏ô schema

4. **Error Handling**: ‡∏ñ‡πâ‡∏≤‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å responsibilities/risks/competencies ‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß ‡∏à‡∏∞‡πÑ‡∏°‡πà rollback ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏´‡∏•‡∏±‡∏Å
   - **‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥**: ‡πÉ‡∏ä‡πâ Supabase RPC function ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ó‡∏≥ transaction ‡∏ó‡∏µ‡πà‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå

---

## ‡∏™‡∏£‡∏∏‡∏õ‡∏ó‡πâ‡∏≤‡∏¢‡∏™‡∏∏‡∏î

‚úÖ **Create Job Description ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô 100% ‡∏ï‡∏≤‡∏° Database Schema**

‡∏ó‡∏∏‡∏Å field ‡∏ó‡∏µ‡πà‡∏Å‡∏£‡∏≠‡∏Å‡πÉ‡∏ô UI ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á‡πÉ‡∏ô database ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á:
- ‚úÖ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô (Position, Job Band, Job Grade, Location, Department, Team, Direct Supervisor, Job Purpose, Status)
- ‚úÖ ‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö 6 categories
- ‚úÖ ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å‡πÅ‡∏•‡∏∞‡∏†‡∏≤‡∏¢‡πÉ‡∏ô
- ‚úÖ ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏™‡∏°‡∏£‡∏£‡∏ñ‡∏ô‡∏∞‡∏ó‡∏±‡πâ‡∏á 6 ‡∏î‡πâ‡∏≤‡∏ô ‡∏û‡∏£‡πâ‡∏≠‡∏° notes

**‡∏£‡∏∞‡∏ö‡∏ö‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß!** üéâ
